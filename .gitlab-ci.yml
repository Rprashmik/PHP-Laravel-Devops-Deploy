stages:
  - build
  - deploy

build:
  stage: build
  tags:
    - PHP
    - PHP-laravel
  script:
    - echo "BUILD on self-hosted runner"
    - whoami
    - hostname
    - php -v
    - composer --version
    - composer install --no-dev --optimize-autoloader

deploy:
  stage: deploy
  tags:
    - PHP
    - PHP-laravel
  script:
    - echo "DEPLOY on self-hosted runner"
    - pwd
    - php artisan config:clear
    - php artisan cache:clear
    - php artisan route:cache
    - php artisan view:cache
    - echo "Deploy done âœ…"
