stages:
  - build
  - deploy

default:
  tags:
    - PHP
    - PHP-laravel

build:
  stage: build
  script:
    - echo "Running BUILD on self-hosted shell runner"
    - php -v
    - composer --version
    - composer install --no-dev --optimize-autoloader

deploy:
  stage: deploy
  script:
    - echo "Running DEPLOY on self-hosted shell runner"
    - php artisan config:clear
    - php artisan cache:clear
    - php artisan route:cache
    - php artisan view:cache
    - echo "Laravel deployed successfully âœ…"
